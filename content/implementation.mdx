import { Tabs, Callout, Steps } from 'nextra/components'
import Mermaid from '../components/Mermaid'
import { Box, User, TrendingUp, DollarSign, Link as LinkIcon, Settings, Calendar, AlertTriangle, CheckCircle, XCircle, Clock, Cpu, CalendarDays, CalendarCheck } from 'lucide-react'

# Implementation Guide

Data requirements, investment levels, and phasing strategies.

<Tabs items={['Data Matrix', 'Investment', 'Phasing', 'Remediation']}>
  
  <Tabs.Tab>
    ## Data Dependency Matrix
    What data each feature needs to perform well.

    <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 my-6">
        <div className="p-4 rounded-lg bg-cyan-50 dark:bg-cyan-900/20 text-center border border-cyan-100 dark:border-cyan-800">
            <div className="mb-2 flex justify-center text-cyan-600 dark:text-cyan-400"><Box size={24} /></div>
            <div className="font-bold text-sm">Catalog</div>
            <div className="text-xs text-gray-500 dark:text-gray-400">Products & attributes</div>
        </div>
        <div className="p-4 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 text-center border border-yellow-100 dark:border-yellow-800">
            <div className="mb-2 flex justify-center text-yellow-600 dark:text-yellow-400"><User size={24} /></div>
            <div className="font-bold text-sm">User</div>
            <div className="text-xs text-gray-500 dark:text-gray-400">Accounts & prefs</div>
        </div>
        <div className="p-4 rounded-lg bg-purple-50 dark:bg-purple-900/20 text-center border border-purple-100 dark:border-purple-800">
            <div className="mb-2 flex justify-center text-purple-600 dark:text-purple-400"><TrendingUp size={24} /></div>
            <div className="font-bold text-sm">Behavioral</div>
            <div className="text-xs text-gray-500 dark:text-gray-400">Searches & clicks</div>
        </div>
        <div className="p-4 rounded-lg bg-red-50 dark:bg-red-900/20 text-center border border-red-100 dark:border-red-800">
            <div className="mb-2 flex justify-center text-red-600 dark:text-red-400"><DollarSign size={24} /></div>
            <div className="font-bold text-sm">Transactional</div>
            <div className="text-xs text-gray-500 dark:text-gray-400">Orders & history</div>
        </div>
        <div className="p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-center border border-blue-100 dark:border-blue-800">
            <div className="mb-2 flex justify-center text-blue-600 dark:text-blue-400"><LinkIcon size={24} /></div>
            <div className="font-bold text-sm">Relationships</div>
            <div className="text-xs text-gray-500 dark:text-gray-400">Cross-references</div>
        </div>
        <div className="p-4 rounded-lg bg-emerald-50 dark:bg-emerald-900/20 text-center border border-emerald-100 dark:border-emerald-800">
            <div className="mb-2 flex justify-center text-emerald-600 dark:text-emerald-400"><Settings size={24} /></div>
            <div className="font-bold text-sm">Config</div>
            <div className="text-xs text-gray-500 dark:text-gray-400">Rules & settings</div>
        </div>
    </div>

    | Feature | Primary Data | Data Quality Impact | Day 1 Viable? |
    | :--- | :--- | :--- | :--- |
    | **Auto Complete** | Basic Catalog | <span className="px-2 py-1 rounded text-xs font-bold bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300">Low</span> | ‚úÖ Yes |
    | **Faceted Search** | Rich Catalog (Attributes) | <span className="px-2 py-1 rounded text-xs font-bold bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300">Medium</span> | ‚ö†Ô∏è If attributes exist |
    | **Semantic Search** | Rich Catalog (Descriptions) | <span className="px-2 py-1 rounded text-xs font-bold bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300">High</span> | ‚ö†Ô∏è Quality = Desc quality |
    | **Intelligent Synonyms** | Behavioral Data | <span className="px-2 py-1 rounded text-xs font-bold bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300">Medium</span> | ‚ùå Needs 30+ days |
    | **ML Ranking** | Behavioral + Transactional | <span className="px-2 py-1 rounded text-xs font-bold bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300">High</span> | ‚ùå Needs 90+ days |
    | **Recommendations** | Behavioral + Trans + User | <span className="px-2 py-1 rounded text-xs font-bold bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300">High</span> | ‚ö†Ô∏è Can bootstrap rules |
    | **Cross-Brand Equiv** | Relationship Data | <span className="px-2 py-1 rounded text-xs font-bold bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300">Medium</span> | ‚ö†Ô∏è If cross-refs exist |
    | **Recently Ordered** | User + Transactional | <span className="px-2 py-1 rounded text-xs font-bold bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300">Medium</span> | ‚úÖ If history accessible |
    | **Curations** | Basic Catalog | <span className="px-2 py-1 rounded text-xs font-bold bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300">Low</span> | ‚úÖ Yes |
    | **Analytics** | Behavioral Data | <span className="px-2 py-1 rounded text-xs font-bold bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300">Medium</span> | ‚úÖ Value grows over time |

    ### Data Quality to Feature Performance
    <Mermaid chart={`
    flowchart LR
    POOR[Poor Data] --> MVP[MVP Max]
    ADEQUATE[Adequate Data] --> STANDARD[Standard Max]
    RICH[Rich Data] --> PREMIUM[Premium Possible]
    style POOR fill:#ff3333,color:#fff,stroke:none
    style ADEQUATE fill:#ffcc00,stroke:none
    style RICH fill:#00cc66,stroke:none
    style MVP fill:#999999,color:#fff,stroke:none
    style STANDARD fill:#00cc66,stroke:none
    style PREMIUM fill:#9933ff,color:#fff,stroke:none
    `} />

    <Callout type="info" emoji="üí°">
        **Core Principle:** Data quality sets the ceiling. Don't over-invest in polishing features when data bottlenecks limit what's achievable. Fix the data first, or accept lower investment level.
    </Callout>
  </Tabs.Tab>

  <Tabs.Tab>
    ## Investment Levels
    Match investment to what's achievable and needed.

    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 my-6">
        <div className="p-6 rounded-xl bg-neutral-500 text-white">
            <div className="mb-2"><Settings size={28} /></div>
            <h3 className="font-bold text-lg mb-1">MVP</h3>
            <p className="font-bold mb-4 opacity-90">Make it work, ship fast</p>
            <ul className="text-sm list-disc pl-4 space-y-1 opacity-90">
                <li>Minimal time investment</li>
                <li>High manual work expected</li>
                <li>Client fills gaps</li>
                <li>Iterate after launch</li>
            </ul>
        </div>
        <div className="p-6 rounded-xl bg-emerald-500 text-white">
            <div className="mb-2"><CheckCircle size={28} /></div>
            <h3 className="font-bold text-lg mb-1">Standard</h3>
            <p className="font-bold mb-4 opacity-90">Solid implementation</p>
            <ul className="text-sm list-disc pl-4 space-y-1 opacity-90">
                <li>Moderate time investment</li>
                <li>Medium manual work</li>
                <li>Core functionality complete</li>
                <li>Production-ready</li>
            </ul>
        </div>
        <div className="p-6 rounded-xl bg-cyan-500 text-white">
            <div className="mb-2"><TrendingUp size={28} /></div>
            <h3 className="font-bold text-lg mb-1">Polished</h3>
            <p className="font-bold mb-4 opacity-90">Self-service ready</p>
            <ul className="text-sm list-disc pl-4 space-y-1 opacity-90">
                <li>Significant time investment</li>
                <li>Low manual work</li>
                <li>Full UX and guardrails</li>
                <li>Documentation complete</li>
            </ul>
        </div>
        <div className="p-6 rounded-xl bg-purple-600 text-white">
            <div className="mb-2"><AlertTriangle size={28} /></div>
            <h3 className="font-bold text-lg mb-1">Premium</h3>
            <p className="font-bold mb-4 opacity-90">Bulletproof, white-glove</p>
            <ul className="text-sm list-disc pl-4 space-y-1 opacity-90">
                <li>High time investment</li>
                <li>Minimal manual work</li>
                <li>Extensively tested</li>
                <li>Runs itself</li>
            </ul>
        </div>
    </div>

    ### Investment Decision Flow
    <Mermaid chart={`
    flowchart TD
    START[Feature Selected] --> DATA{Data Quality}
    DATA --> CEILING1[Poor: STANDARD max]
    DATA --> CEILING2[Adequate: POLISHED max]
    DATA --> CEILING3[Rich: PREMIUM possible]
    CEILING1 --> IMPORTANCE{Importance}
    CEILING2 --> IMPORTANCE
    CEILING3 --> IMPORTANCE
    IMPORTANCE --> BASE_HIGH[Critical: POLISHED]
    IMPORTANCE --> BASE_MED[Important: STANDARD]
    IMPORTANCE --> BASE_LOW[Nice: MVP]
    BASE_HIGH --> CAPACITY{Client Capacity}
    BASE_MED --> CAPACITY
    BASE_LOW --> CAPACITY
    CAPACITY --> ADJUST_UP[Low: Up 1 Level]
    CAPACITY --> ADJUST_DOWN[High: Down 1 Level]
    CAPACITY --> NO_ADJUST[Medium: Stay]
    ADJUST_UP --> FINAL[Final Level]
    ADJUST_DOWN --> FINAL
    NO_ADJUST --> FINAL
    style START fill:#ffff00,stroke:none
    style FINAL fill:#00cc66,stroke:none
    `} />

    ### Quick Reference Matrix

    | Feature Importance | Low Capacity | Medium Capacity | High Capacity |
    | :--- | :--- | :--- | :--- |
    | **‚≠ê Critical** | <span className="px-2 py-1 rounded text-xs font-bold bg-purple-100 text-purple-700">PREMIUM</span> | <span className="px-2 py-1 rounded text-xs font-bold bg-cyan-100 text-cyan-700">POLISHED</span> | <span className="px-2 py-1 rounded text-xs font-bold bg-cyan-100 text-cyan-700">POLISHED</span> |
    | **Important** | <span className="px-2 py-1 rounded text-xs font-bold bg-cyan-100 text-cyan-700">POLISHED</span> | <span className="px-2 py-1 rounded text-xs font-bold bg-green-100 text-green-700">STANDARD</span> | <span className="px-2 py-1 rounded text-xs font-bold bg-green-100 text-green-700">STANDARD</span> |
    | **Nice-to-have** | <span className="px-2 py-1 rounded text-xs font-bold bg-green-100 text-green-700">STANDARD</span> | <span className="px-2 py-1 rounded text-xs font-bold bg-gray-200 text-gray-700">MVP</span> | <span className="px-2 py-1 rounded text-xs font-bold bg-gray-200 text-gray-700">MVP</span> |

    <Callout type="warning" emoji="‚ö†Ô∏è">
        **Remember the ceiling:** The matrix above assumes adequate data. If data is poor, cap the investment regardless of importance. Premium investment with poor data = wasted effort.
    </Callout>
  </Tabs.Tab>

  <Tabs.Tab>
    ## Implementation Phasing
    When to enable each feature based on data availability.

    <Mermaid chart={`
    flowchart LR
    DAY1[DAY 1: Auto Complete, Part Numbers, Facets] --> DAY30[DAY 30: Analytics, Trending, Related]
    DAY30 --> DAY60[DAY 60: Synonyms, Semantic, Testing]
    REL[When Relationships: Equivalents, Kitting]
    USER[When User Data: Reorder, Recommendations, ML]
    style DAY1 fill:#00cc66,stroke:none
    style DAY30 fill:#ffcc00,stroke:none
    style DAY60 fill:#ff9900,stroke:none
    style REL fill:#0066ff,color:#fff,stroke:none
    style USER fill:#9933ff,color:#fff,stroke:none
    `} />

    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 my-6">
        <div className="border-l-4 border-emerald-500 pl-4 py-2 bg-neutral-50 dark:bg-neutral-900">
            <h3 className="flex items-center gap-2 font-bold mb-2"><CalendarDays size={20} className="text-emerald-500"/> Day 1 Features</h3>
            <p className="text-sm mb-3 opacity-80">Work immediately with basic catalog data:</p>
            <ul className="list-disc pl-5 text-sm space-y-1">
                <li><strong>Auto Complete</strong> ‚Äî Titles and SKUs</li>
                <li><strong>Part Number Normalization</strong> ‚Äî Pattern matching</li>
                <li><strong>Basic Facets</strong> ‚Äî Category/brand filtering</li>
                <li><strong>Search Sandbox</strong> ‚Äî Testing tool</li>
                <li><strong>Curations</strong> ‚Äî Manual merchandising</li>
                <li><strong>Configuration Management</strong> ‚Äî Settings control</li>
            </ul>
        </div>

        <div className="border-l-4 border-yellow-400 pl-4 py-2 bg-neutral-50 dark:bg-neutral-900">
            <h3 className="flex items-center gap-2 font-bold mb-2"><TrendingUp size={20} className="text-yellow-400"/> Day 30 Features</h3>
            <p className="text-sm mb-3 opacity-80">Unlock after behavioral data accumulates:</p>
            <ul className="list-disc pl-5 text-sm space-y-1">
                <li><strong>Analytics Dashboard</strong> ‚Äî Search insights</li>
                <li><strong>Trending Search</strong> ‚Äî Popular queries</li>
                <li><strong>Related Searches</strong> ‚Äî Query suggestions</li>
                <li><strong>Zero Results Recovery</strong> ‚Äî Better with patterns</li>
                <li><strong>Query Behaviour Labeller</strong> ‚Äî Pattern analysis</li>
            </ul>
        </div>

        <div className="border-l-4 border-orange-500 pl-4 py-2 bg-neutral-50 dark:bg-neutral-900">
            <h3 className="flex items-center gap-2 font-bold mb-2"><CalendarCheck size={20} className="text-orange-500"/> Day 60-90 Features</h3>
            <p className="text-sm mb-3 opacity-80">Require significant behavioral data:</p>
            <ul className="list-disc pl-5 text-sm space-y-1">
                <li><strong>Intelligent Synonyms</strong> ‚Äî Learned mappings</li>
                <li><strong>Semantic Search</strong> ‚Äî Better with enriched content</li>
                <li><strong>A/B Testing</strong> ‚Äî Needs traffic volume</li>
                <li><strong>Fallback Search</strong> ‚Äî Tuned to patterns</li>
            </ul>
        </div>

        <div className="border-l-4 border-purple-500 pl-4 py-2 bg-neutral-50 dark:bg-neutral-900">
            <h3 className="flex items-center gap-2 font-bold mb-2"><LinkIcon size={20} className="text-purple-500"/> When Data Connected</h3>
            <p className="text-sm mb-3 opacity-80">Dependent on specific integrations:</p>
            <ul className="list-disc pl-5 text-sm space-y-1">
                <li><strong>Relationships:</strong> Cross-Brand Equivalents, Kitting</li>
                <li><strong>User + Orders:</strong> Recently Ordered, Recommendations</li>
                <li><strong>Full Stack:</strong> ML Ranking, Intelligent Auto Complete</li>
            </ul>
        </div>
    </div>
  </Tabs.Tab>

  <Tabs.Tab>
    ## Data Remediation
    Three paths when data has gaps.

    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 my-6">
        <div className="border-t-4 border-emerald-500 pt-4 p-4 rounded-b-lg bg-neutral-50 dark:bg-neutral-900 shadow-sm">
            <div className="text-emerald-500 mb-2"><DollarSign size={32} /></div>
            <h3 className="font-bold text-lg mb-1">Pay Now</h3>
            <p className="text-sm font-bold mb-3">Fix data first, then implement</p>
            <ul className="text-sm list-disc pl-4 space-y-1 opacity-80 text-xs">
                <li>Higher upfront investment</li>
                <li>Better outcomes long-term</li>
                <li>Features perform at full potential</li>
                <li>No technical debt</li>
            </ul>
            <p className="mt-4 text-xs"><strong>Best when:</strong> Budget available, timeline flexible, data gaps are fixable</p>
        </div>

        <div className="border-t-4 border-yellow-400 pt-4 p-4 rounded-b-lg bg-neutral-50 dark:bg-neutral-900 shadow-sm">
            <div className="text-yellow-400 mb-2"><Clock size={32} /></div>
            <h3 className="font-bold text-lg mb-1">Pay Later</h3>
            <p className="text-sm font-bold mb-3">Launch with gaps, fix later</p>
            <ul className="text-sm list-disc pl-4 space-y-1 opacity-80 text-xs">
                <li>Lower upfront cost</li>
                <li>Risk documented in SOW</li>
                <li>Features may underperform</li>
                <li>Expect iteration</li>
            </ul>
            <p className="mt-4 text-xs"><strong>Best when:</strong> Tight timeline, budget constrained, gaps are manageable</p>
        </div>

        <div className="border-t-4 border-blue-500 pt-4 p-4 rounded-b-lg bg-neutral-50 dark:bg-neutral-900 shadow-sm">
            <div className="text-blue-500 mb-2"><Cpu size={32} /></div>
            <h3 className="font-bold text-lg mb-1">AI Enrichment</h3>
            <p className="text-sm font-bold mb-3">Generate missing data with AI</p>
            <ul className="text-sm list-disc pl-4 space-y-1 opacity-80 text-xs">
                <li>Faster than manual</li>
                <li>Human-in-the-loop approval</li>
                <li>Works for generatable content</li>
                <li>Quality depends on source</li>
            </ul>
            <p className="mt-4 text-xs"><strong>Best when:</strong> Descriptions/attributes missing, images available, approval process in place</p>
        </div>
    </div>

    ### AI Enrichment Pipeline
    <Mermaid chart={`
    flowchart LR
    SOURCE[Source Data] --> AI[AI Generation]
    AI --> CONFIDENCE{Confidence Score}
    CONFIDENCE --> AUTO[High: Auto Approve]
    CONFIDENCE --> REVIEW[Medium: Human Review]
    CONFIDENCE --> MANUAL[Low: Manual Write]
    AUTO --> FEATURE[Feature Unlocked]
    REVIEW --> FEATURE
    MANUAL --> FEATURE
    style SOURCE fill:#ffff00,stroke:none
    style AI fill:#0066ff,color:#fff,stroke:none
    style FEATURE fill:#00cc66,stroke:none
    `} />

    ### What Can AI Generate?
    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 my-6">
        <div className="p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-100 dark:border-green-800">
            <h4 className="flex items-center gap-2 font-bold mb-3 text-green-700 dark:text-green-300"><CheckCircle size={20}/> Generatable</h4>
            <ul className="list-disc pl-5 text-sm space-y-2">
                <li><strong>Product descriptions</strong> ‚Äî From images + titles + specs</li>
                <li><strong>Attribute extraction</strong> ‚Äî From unstructured text</li>
                <li><strong>Category suggestions</strong> ‚Äî From product content</li>
                <li><strong>Search keywords</strong> ‚Äî Synonyms and variants</li>
                <li><strong>Short descriptions</strong> ‚Äî Summaries from long content</li>
            </ul>
        </div>
        <div className="p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-100 dark:border-red-800">
            <h4 className="flex items-center gap-2 font-bold mb-3 text-red-700 dark:text-red-300"><XCircle size={20}/> Not Generatable</h4>
            <ul className="list-disc pl-5 text-sm space-y-2">
                <li><strong>Pricing</strong> ‚Äî Business data</li>
                <li><strong>Inventory levels</strong> ‚Äî Real-time data</li>
                <li><strong>Cross-references</strong> ‚Äî Requires industry knowledge</li>
                <li><strong>Order history</strong> ‚Äî Transactional data</li>
                <li><strong>User behavior</strong> ‚Äî Must be collected</li>
            </ul>
        </div>
    </div>

    ### Remediation Decision Tree
    <Mermaid chart={`
    flowchart TD
    START[Data Gap Identified] --> TYPE{What type of data}
    TYPE --> GENERABLE{Descriptions: Can AI generate}
    TYPE --> COLLECT[Behavioral: Must Collect]
    TYPE --> SOURCE{Relationships: Source available}
    GENERABLE --> AI[Yes: AI Enrichment]
    GENERABLE --> MANUAL[No: Manual Entry]
    SOURCE --> IMPORT[Yes: Import]
    SOURCE --> BUILD[No: Build Manually]
    COLLECT --> WAIT[Launch Without]
    style START fill:#ff3333,color:#fff,stroke:none
    style AI fill:#0066ff,color:#fff,stroke:none
    style COLLECT fill:#ffcc00,stroke:none
    style WAIT fill:#00cc66,stroke:none
    `} />

  </Tabs.Tab>
</Tabs>
